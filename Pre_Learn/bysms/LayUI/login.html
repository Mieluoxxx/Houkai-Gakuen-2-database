<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link rel="stylesheet" href="login.css">
    <script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/jquery/3.6.0/jquery.min.js"></script>

    <script>
        window.onload = () => {
            document.querySelector('#loginBtn').onclick = () => {
                let username = document.querySelector('#username').value
                let password = document.querySelector('#password').value


                $.ajax({
                    type: 'POST',
                    url: '/api/mgr/signin',
                    data: {
                        username: username,
                        password: password,
                    },
                    // 成功
                    success: function (data, status, xhr) {
                        // jQuery 会自动将响应的消息体字符
                        // 按json格式串反序列化为js对象
                        if (data.ret === 0) {
                            location.href = '/mgr/index.html'
                        } else {
                            alert('登录失败： ' + data.msg)
                        }

                    },
                    // 错误
                    error: function (xhr, textStatus, errorThrown) {
                        console.error(`${xhr.status} \n${textStatus} \n${errorThrown}`)
                    }

                })


            }
        };
    </script>
</head>
<body>
<div class="box">
    <h2>Login</h2>
    <div class="input-box">
        <label>账号</label>
        <input type="text" id="username"/>
    </div>
    <div class="input-box">
        <label>密码</label>
        <input type="password" id="password"/>
    </div>
    <div class="btn-box">
        <a href="#">忘记密码?</a>
        <div>
            <button id="loginBtn">登录</button>
            <button>注册</button>
        </div>
    </div>
</div>

<script type="text/javascript">

</script>
</body>
</html>